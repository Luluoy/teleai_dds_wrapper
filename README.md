# TeleAI DDS Python Wrapper

本项目是 **TeleAI（中国电信人工智能研究院）** 在具身智能（Embodied Intelligence）研发实践过程中开发并内部使用的一套 **DDS 通信库的 Python 封装**。
项目主要服务于研究与原型验证阶段，当前仅提供 **Python 层 Wrapper**，底层通信与共享内存机制均基于成熟的开源实现，未做功能性修改。

本仓库希望以尽量克制、稳定的方式，为具身智能系统提供一种 **高性能、低耦合、可扩展** 的进程间与跨节点通信基础设施。也非常欢迎社区一同使用、反馈与共建。

---

## 项目简介

本项目专为 **高带宽数据传输场景** 设计（例如原始图像、大尺寸张量等），
基于 **Iceoryx 共享内存（SHM）技术**，并结合 **DDS（Data Distribution Service）通信模型**，支持在**整个二层广播域**下的透明数据传输。

* **DDS 实现**：CycloneDDS
* **共享内存实现**：Iceoryx
* **Python 接口**：本项目提供的轻量级 Wrapper
* **底层依赖**：均保持原生行为，未进行侵入式修改

---

## 为什么在具身智能中使用 DDS？

在具身智能系统中，感知、推理、规划与控制往往分布在不同进程甚至不同计算节点上，对通信实时性与稳定性提出了较高要求。DDS 在这一领域具备一些天然优势：

* **绕开 Python GIL 的限制**
  在 Python 3.13 及更新版本中，DDS 可在设计层面规避 GIL 带来的并发瓶颈，更自然地支持多进程并行。

* **高效的进程间通信（IPC）**
  结合 Iceoryx 的零拷贝共享内存机制，可显著降低大数据传输的延迟与 CPU 开销。

* **解耦推理与控制逻辑**
  可将 VLA / Policy / Diffusion 等推理过程与实时控制解耦，使系统结构更加清晰、稳定。

* **更可靠的异步推理支持**
  为时间步融合（如 TE 算法）、多频率模块协同提供更坚实的通信基础。

---

## 环境要求

* **操作系统**: Ubuntu 22.04
* **Python 版本**: 推荐 3.8 ~ 3.10
* **系统依赖**:
  项目提供脚本 `compile_thirdparty.sh`，用于自动编译并安装所需的第三方依赖（CycloneDDS、Iceoryx 及相关库）。

---

## 安装流程

请按以下步骤进行安装：

1. **编译并安装第三方依赖**

   ```bash
   ./compile_thirdparty.sh
   ```

2. **刷新环境变量**

   默认情况下，脚本会修改 `~/.bashrc`，因此需要手动执行：

   ```bash
   source ~/.bashrc
   ```

   > ⚠️ 如果你使用的不是 `bash`（例如 `zsh`、`fish` 等），
   > 请自行修改 `compile_thirdparty.sh` 中与 shell 配置相关的部分，并刷新对应终端环境。

3. **完成安装**

   至此，Python Wrapper 即可正常使用。

---

## 安装验证

手头有realsense相机的时候，可以通过运行以下脚本来验证安装是否成功：

```bash
python py_pub_realsense.py
```

```bash
python py_sub_realsense.py
```

若脚本能够正常运行并输出预期结果，说明 DDS 与 SHM 的 Python 接口已正确配置。
如果图像卡顿，考虑有可能是iceoryx没有正确配置。
你也可以将上述代码视为一个简单的例程，参考他们来进行dds的开发。

---

## 当前状态与说明

* 本项目主要面向 **研究与内部使用场景**，接口与结构仍在持续演进中
* 当前仅提供 **Python 层封装**，未对底层 DDS / SHM 行为做任何增强或裁剪
* 更偏重 **稳定性、可读性与工程透明度**，而非功能堆叠

---

## 致谢与共建

本项目站在 CycloneDDS 与 Iceoryx 等优秀开源项目的肩膀之上。
如果你正在从事具身智能、机器人系统或高性能数据通信相关研究，
也非常欢迎一同交流、使用与改进这套基础设施。

> 若有问题、建议或改进想法，欢迎提出 Issue 或 Pull Request。
